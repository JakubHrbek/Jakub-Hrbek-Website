<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Selection Sort | Algolt</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" />
  <link rel="stylesheet" href="algorithm.css" />
</head>
<body>
  <nav class="navbar sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center space-x-8">
          <a href="../index.html" class="navbar-link text-sm font-medium text-gray-900 hover:text-blue-600">JH</a>
          <a href="../../algolt/index.html" class="navbar-link far-link text-sm font-medium text-gray-900 hover:text-blue-600">Home</a>
        </div>
        <div class="flex items-center">
          <span class="text-sm font-medium text-gray-600">Selection Sort</span>
        </div>
      </div>
    </div>
  </nav>

  <header class="px-4 md:px-6 py-12 border-b border-gray-200 bg-white">
    <div class="max-w-7xl mx-auto">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
        Selection Sort Visualizer
      </h1>
      <p class="text-lg text-gray-600 max-w-2xl">
        Interactive visualization of the selection sort algorithm with step-by-step execution and performance metrics.
      </p>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 md:p-6 space-y-12">
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2 space-y-6">
        <div class="visualizer-card card p-6">
          <div id="visualizer" class="flex items-end justify-center h-[280px] md:h-[320px] overflow-hidden"></div>
        </div>
        
        <div class="card p-6">
          <div class="control-buttons flex flex-wrap gap-3 mb-6">
            <button id="playBtn" class="btn btn-primary px-6 py-3">Play</button>
            <button id="pauseBtn" class="btn btn-primary px-6 py-3">Pause</button>
            <button id="stepBtn" class="btn btn-primary px-6 py-3">Step</button>
            <button id="resetBtn" class="btn btn-secondary px-6 py-3">Reset</button>
          </div>
          
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-label">Timer</div>
              <div id="timer" class="stat-value mono">0.00s</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Comparisons</div>
              <div id="comparisons" class="stat-value mono">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Swaps</div>
              <div id="swaps" class="stat-value mono">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Pass</div>
              <div id="pass" class="stat-value mono">0</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="lg:col-span-1">
        <div class="code-block h-full">
          <pre><code class="language-js">function selectionSort(arr) {
  const n = arr.length;
  
  for (let i = 0; i < n - 1; i++) {
    let minIndex = i;
    
    for (let j = i + 1; j < n; j++) {
      if (arr[j] < arr[minIndex]) {
        minIndex = j;
      }
    }
    
    if (minIndex !== i) {
      [arr[i], arr[minIndex]] = 
        [arr[minIndex], arr[i]];
    }
  }
  
  return arr;
}</code></pre>
        </div>
      </div>
    </section>

    <section class="card p-6">
      <h2 class="section-title">Custom Input</h2>
      <p class="text-gray-600 mb-4">Enter your own array of numbers to visualize the sorting process.</p>
      <div class="flex flex-col sm:flex-row gap-3">
        <div class="input-group flex-1">
          <input id="customInput" class="input-field" placeholder="Enter comma-separated numbers (e.g. 64,34,25,12,22,11,90)" />
        </div>
        <button id="loadCustom" class="btn btn-primary px-6 py-3 whitespace-nowrap">Load Array</button>
      </div>
    </section>

    <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div class="card p-6">
        <h2 class="section-title">How It Works</h2>
        <p class="text-gray-700 leading-relaxed">
          Selection Sort divides the array into sorted and unsorted portions. It repeatedly finds the minimum element from the unsorted portion and swaps it with the first element of the unsorted portion.
        </p>
      </div>
      
      <div class="card p-6">
        <h2 class="section-title">Key Characteristics</h2>
        <ul class="space-y-2 text-gray-700">
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            <span><strong>Unstable:</strong> May change relative order of equal elements</span>
          </li>
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            <span><strong>In-place:</strong> Sorts with O(1) extra space</span>
          </li>
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            <span><strong>Not adaptive:</strong> Performance doesn't improve on sorted data</span>
          </li>
        </ul>
      </div>
    </section>
    
    <section class="card p-6">
      <h2 class="section-title">Time & Space Complexity</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4 text-gray-800">Selection Sort Analysis</h3>
          <div class="space-y-3">
            <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="font-medium text-gray-700">Best Case:</span>
              <span class="mono text-yellow-600 font-semibold">O(n²)</span>
            </div>
            <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="font-medium text-gray-700">Average Case:</span>
              <span class="mono text-yellow-600 font-semibold">O(n²)</span>
            </div>
            <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="font-medium text-gray-700">Worst Case:</span>
              <span class="mono text-red-600 font-semibold">O(n²)</span>
            </div>
            <div class="flex justify-between items-center py-2">
              <span class="font-medium text-gray-700">Space:</span>
              <span class="mono text-blue-600 font-semibold">O(1)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="quiz-card" id="quiz-section">
      <h2 class="section-title">Test Your Knowledge</h2>
      <div id="quiz-container"></div>
    </section>

    <section class="card p-6 text-center">
      <a href="./heap-sort.html" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium transition-colors">
        Next: Heap Sort
        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </section>
  </main>

  <script src="quiz.js"></script>
  
  <script>
    const visualizer = document.getElementById("visualizer");
    const playBtn = document.getElementById("playBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const stepBtn = document.getElementById("stepBtn");
    const resetBtn = document.getElementById("resetBtn");
    const loadCustom = document.getElementById("loadCustom");
    const input = document.getElementById("customInput");
    const timerDisplay = document.getElementById("timer");
    const comparisonsDisplay = document.getElementById("comparisons");
    const swapsDisplay = document.getElementById("swaps");
    const passDisplay = document.getElementById("pass");

    let values = [], bars = [], i = 0, j = 0, minIndex = 0, comparisons = 0, swaps = 0, pass = 0;
    let isPlaying = false, isPaused = false, isComplete = false;
    let startTime, elapsedTime = 0, timerInterval;
    let searchingForMin = false;

    function updateStats() {
      comparisonsDisplay.innerText = comparisons;
      swapsDisplay.innerText = swaps;
      passDisplay.innerText = pass;
    }

    function getOptimalArraySize() {
      const isMobile = window.innerWidth <= 768;
      return isMobile ? 18 : 25;
    }

    function generateBars(custom = null) {
      const arraySize = getOptimalArraySize();
      values = custom || Array.from({ length: arraySize }, () => Math.floor(Math.random() * 90) + 10);
      
      if (window.innerWidth <= 768 && values.length > 18) {
        values = values.slice(0, 18);
      }
      
      visualizer.innerHTML = "";
      bars = values.map(value => {
        const bar = document.createElement("div");
        bar.classList.add("bar");
        const maxHeight = window.innerWidth <= 768 ? 220 : 260;
        const height = Math.min((value / 100) * maxHeight, maxHeight);
        bar.style.height = `${height}px`;
        visualizer.appendChild(bar);
        return bar;
      });
      
      i = 0; j = 1; minIndex = 0; comparisons = 0; swaps = 0; pass = 0; elapsedTime = 0; isComplete = false;
      searchingForMin = false;
      timerDisplay.innerText = "0.00s";
      updateStats();
      
      playBtn.disabled = false;
      playBtn.textContent = "Play";
      pauseBtn.textContent = "Pause";
      isPaused = false;
      isPlaying = false;
    }

    function startTimer() {
      startTime = Date.now() - elapsedTime * 1000;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        if (!isPaused) {
          elapsedTime = (Date.now() - startTime) / 1000;
          timerDisplay.innerText = `${elapsedTime.toFixed(2)}s`;
        }
      }, 10);
    }

    function resetBarColors() {
      bars.forEach(bar => {
        bar.classList.remove('comparing', 'sorted', 'minimum', 'current');
      });
    }

    async function sortStep() {
      if (i >= values.length - 1) {
        isComplete = true;
        clearInterval(timerInterval);
        bars.forEach(bar => bar.classList.add('sorted'));
        playBtn.textContent = "Complete";
        playBtn.disabled = true;
        return;
      }

      resetBarColors();
      
      for (let k = 0; k < i; k++) {
        bars[k].classList.add('sorted');
      }

      if (!searchingForMin) {
        minIndex = i;
        j = i + 1;
        searchingForMin = true;
        pass++;
        bars[i].classList.add('current');
        bars[minIndex].classList.add('minimum');
      }

      if (j < values.length) {
        comparisons++;
        bars[j].classList.add('comparing');
        
        if (values[j] < values[minIndex]) {
          bars[minIndex].classList.remove('minimum');
          minIndex = j;
          bars[minIndex].classList.add('minimum');
        }
        
        const delay = window.innerWidth <= 768 ? 250 : 200;
        await new Promise(r => setTimeout(r, delay));
        
        bars[j].classList.remove('comparing');
        j++;
      } else {
        searchingForMin = false;
        
        if (minIndex !== i) {
          swaps++;
          [values[i], values[minIndex]] = [values[minIndex], values[i]];
          
          const maxHeight = window.innerWidth <= 768 ? 220 : 260;
          bars[i].style.height = `${Math.min((values[i] / 100) * maxHeight, maxHeight)}px`;
          bars[minIndex].style.height = `${Math.min((values[minIndex] / 100) * maxHeight, maxHeight)}px`;
          
          bars[i].classList.add('comparing');
          bars[minIndex].classList.add('comparing');
          
          await new Promise(r => setTimeout(r, 300));
          
          bars[i].classList.remove('comparing');
          bars[minIndex].classList.remove('comparing');
        }
        
        bars[i].classList.remove('current');
        bars[minIndex].classList.remove('minimum');
        bars[i].classList.add('sorted');
        
        i++;
      }
      
      updateStats();
    }

    async function selectionSortLoop() {
      startTimer();
      while (i < values.length - 1 && isPlaying && !isPaused && !isComplete) {
        await sortStep();
      }
      if (isComplete) {
        clearInterval(timerInterval);
      }
    }

    playBtn.onclick = () => {
      if (!isPlaying && !isComplete) {
        isPlaying = true;
        isPaused = false;
        playBtn.textContent = "Playing...";
        selectionSortLoop();
      }
    };

    pauseBtn.onclick = () => {
      if (isComplete) return;
      
      isPaused = !isPaused;
      if (!isPaused && isPlaying) {
        selectionSortLoop();
        pauseBtn.textContent = "Pause";
        playBtn.textContent = "Playing...";
      } else {
        pauseBtn.textContent = "Resume";
        playBtn.textContent = "Play";
      }
    };

    stepBtn.onclick = async () => {
      if (!isComplete) {
        isPlaying = false;
        isPaused = true;
        playBtn.textContent = "Play";
        pauseBtn.textContent = "Pause";
        await sortStep();
      }
    };

    resetBtn.onclick = () => {
      isPaused = true;
      isPlaying = false;
      isComplete = false;
      searchingForMin = false;
      clearInterval(timerInterval);
      generateBars();
    };

    loadCustom.onclick = () => {
      const nums = input.value.split(',')
        .map(n => parseInt(n.trim()))
        .filter(n => !isNaN(n) && n > 0)
        .map(n => Math.min(n, 100));
      
      if (nums.length > 1) {
        const maxSize = window.innerWidth <= 768 ? 18 : 35;
        const limitedNums = nums.slice(0, maxSize);
        generateBars(limitedNums);
        input.value = '';
      } else {
        alert('Please enter at least 2 valid numbers separated by commas.');
      }
    };

    window.addEventListener('resize', () => {
      generateBars(values);
    });

    input.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        loadCustom.click();
      }
    });

    generateBars();

    const selectionSortQuizData = [
      {
        question: "What is the time complexity of Selection Sort in all cases?",
        options: ["O(n)", "O(n log n)", "O(n²)", "O(log n)"],
        answer: "O(n²)",
        explanation: "Selection Sort always performs n-1 passes, and each pass requires comparing with all remaining elements, resulting in O(n²) time complexity regardless of input."
      },
      {
        question: "How many swaps does Selection Sort perform in the worst case for n elements?",
        options: ["O(n²)", "O(n)", "O(n-1)", "O(1)"],
        answer: "O(n-1)",
        explanation: "Selection Sort performs at most n-1 swaps, one per pass, regardless of the input arrangement. This is fewer swaps than most other O(n²) algorithms."
      },
      {
        question: "What makes Selection Sort unstable?",
        options: [
          "It uses extra memory",
          "It may swap non-adjacent equal elements",
          "It has quadratic time complexity",
          "It's not an in-place algorithm"
        ],
        answer: "It may swap non-adjacent equal elements",
        explanation: "When swapping the minimum element with the first element of the unsorted portion, equal elements may be moved past each other, changing their relative order."
      },
      {
        question: "What is the main advantage of Selection Sort over other O(n²) algorithms?",
        options: [
          "It's stable",
          "It's adaptive",
          "It minimizes the number of swaps",
          "It has better best-case performance"
        ],
        answer: "It minimizes the number of swaps",
        explanation: "Selection Sort performs at most n-1 swaps, which is optimal. This makes it useful when writing to memory is expensive."
      }
    ];

    AlgorithmQuiz.create('quiz-container', selectionSortQuizData);
  </script>
</body>
</html>